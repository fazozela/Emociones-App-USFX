{"ast":null,"code":"import _asyncToGenerator from \"/Users/fazozela/Desktop/Tesis Ciencias/PrototipoFinal/EmocionesApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { __decorate } from \"tslib\";\nimport { Component, ViewChild } from '@angular/core';\nimport * as _ from 'lodash';\nlet VideoComponent = class VideoComponent {\n  constructor(faceApiService, videoService, data = {\n    labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July'],\n    datasets: [{\n      label: 'First Dataset',\n      data: [65, 59, 80, 81, 56, 55, 40]\n    }, {\n      label: 'Second Dataset',\n      data: [28, 48, 40, 19, 86, 27, 90]\n    }]\n  }) {\n    this.faceApiService = faceApiService;\n    this.videoService = videoService;\n    this.modelsReady = false;\n    this.listEvents = [];\n    this.videoPath = 'http://localhost:3000/file-serve/video1.mp4';\n    this.results = false; // Data\n\n    this.listExpressions = [];\n    this.neutralExp = [];\n    this.happyExp = [];\n    this.sadExp = [];\n    this.angryExp = [];\n    this.fearfulExp = [];\n    this.disgustedExp = [];\n    this.surprisedExp = [];\n  }\n\n  ngOnInit() {\n    this.listenerEvents();\n    this.listenerEventsData();\n  }\n\n  ngOnDestroy() {\n    this.listEvents.forEach(event => event.unsubscribe());\n  }\n\n  checkFace() {\n    var _this = this;\n\n    setInterval( /*#__PURE__*/_asyncToGenerator(function* () {\n      yield _this.videoService.getLandMark(_this.videoElement);\n    }), 100);\n  }\n\n  listenerEvents() {\n    const observer1$ = this.faceApiService.cbModels.subscribe(res => {\n      this.modelsReady = true;\n      this.checkFace();\n    });\n    const observer2$ = this.videoService.cbAi.subscribe(({\n      expressions\n    }) => {});\n    this.listEvents = [observer1$, observer2$];\n  }\n\n  playVideo() {\n    console.log(\"************ Play Video ************\");\n    const myVideo = document.getElementById(\"videoElement\");\n\n    if (myVideo.paused) {\n      myVideo.play();\n    } else {\n      myVideo.pause();\n    }\n  }\n\n  reloadPage() {\n    window.location.reload();\n  } // DataFunctions\n\n\n  listenerEventsData() {\n    const observer2$ = this.videoService.cbAi.subscribe(({\n      expressions\n    }) => {\n      this.listExpressions = _.map(expressions, (value, name) => {\n        return {\n          name,\n          value\n        };\n      }); //NEUTRAL\n\n      this.neutralExp.push(this.listExpressions[0].value); //HAPPY\n\n      this.happyExp.push(this.listExpressions[1].value); //SAD\n\n      this.sadExp.push(this.listExpressions[0].value); //ANGRY\n\n      this.angryExp.push(this.listExpressions[0].value); //FEARFUL\n\n      this.fearfulExp.push(this.listExpressions[0].value); //DISGUSTED\n\n      this.disgustedExp.push(this.listExpressions[0].value); //SURPRISED\n\n      this.surprisedExp.push(this.listExpressions[0].value);\n    });\n    this.listEvents = [observer2$];\n  }\n\n  seeResults() {\n    this.results = true;\n  }\n\n};\n\n__decorate([ViewChild('videoElement')], VideoComponent.prototype, \"videoElement\", void 0);\n\nVideoComponent = __decorate([Component({\n  selector: 'app-video',\n  templateUrl: './video.component.html',\n  styleUrls: ['./video.component.css']\n})], VideoComponent);\nexport { VideoComponent };","map":{"version":3,"sources":["/Users/fazozela/Desktop/Tesis Ciencias/PrototipoFinal/EmocionesApp/src/app/pages/video/video.component.ts"],"names":["__decorate","Component","ViewChild","_","VideoComponent","constructor","faceApiService","videoService","data","labels","datasets","label","modelsReady","listEvents","videoPath","results","listExpressions","neutralExp","happyExp","sadExp","angryExp","fearfulExp","disgustedExp","surprisedExp","ngOnInit","listenerEvents","listenerEventsData","ngOnDestroy","forEach","event","unsubscribe","checkFace","setInterval","getLandMark","videoElement","observer1$","cbModels","subscribe","res","observer2$","cbAi","expressions","playVideo","console","log","myVideo","document","getElementById","paused","play","pause","reloadPage","window","location","reload","map","value","name","push","seeResults","prototype","selector","templateUrl","styleUrls"],"mappings":"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","sourcesContent":["import { __decorate } from \"tslib\";\nimport { Component, ViewChild } from '@angular/core';\nimport * as _ from 'lodash';\nlet VideoComponent = class VideoComponent {\n    constructor(faceApiService, videoService, data = {\n        labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July'],\n        datasets: [\n            {\n                label: 'First Dataset',\n                data: [65, 59, 80, 81, 56, 55, 40]\n            },\n            {\n                label: 'Second Dataset',\n                data: [28, 48, 40, 19, 86, 27, 90]\n            }\n        ]\n    }) {\n        this.faceApiService = faceApiService;\n        this.videoService = videoService;\n        this.modelsReady = false;\n        this.listEvents = [];\n        this.videoPath = 'http://localhost:3000/file-serve/video1.mp4';\n        this.results = false;\n        // Data\n        this.listExpressions = [];\n        this.neutralExp = [];\n        this.happyExp = [];\n        this.sadExp = [];\n        this.angryExp = [];\n        this.fearfulExp = [];\n        this.disgustedExp = [];\n        this.surprisedExp = [];\n    }\n    ngOnInit() {\n        this.listenerEvents();\n        this.listenerEventsData();\n    }\n    ngOnDestroy() {\n        this.listEvents.forEach(event => event.unsubscribe());\n    }\n    checkFace() {\n        setInterval(async () => {\n            await this.videoService.getLandMark(this.videoElement);\n        }, 100);\n    }\n    listenerEvents() {\n        const observer1$ = this.faceApiService.cbModels.subscribe(res => { this.modelsReady = true; this.checkFace(); });\n        const observer2$ = this.videoService.cbAi.subscribe(({ expressions }) => { });\n        this.listEvents = [observer1$, observer2$];\n    }\n    playVideo() {\n        console.log(\"************ Play Video ************\");\n        const myVideo = document.getElementById(\"videoElement\");\n        if (myVideo.paused) {\n            myVideo.play();\n        }\n        else {\n            myVideo.pause();\n        }\n    }\n    reloadPage() {\n        window.location.reload();\n    }\n    // DataFunctions\n    listenerEventsData() {\n        const observer2$ = this.videoService.cbAi.subscribe(({ expressions }) => {\n            this.listExpressions = _.map(expressions, (value, name) => {\n                return { name, value };\n            });\n            //NEUTRAL\n            this.neutralExp.push(this.listExpressions[0].value);\n            //HAPPY\n            this.happyExp.push(this.listExpressions[1].value);\n            //SAD\n            this.sadExp.push(this.listExpressions[0].value);\n            //ANGRY\n            this.angryExp.push(this.listExpressions[0].value);\n            //FEARFUL\n            this.fearfulExp.push(this.listExpressions[0].value);\n            //DISGUSTED\n            this.disgustedExp.push(this.listExpressions[0].value);\n            //SURPRISED\n            this.surprisedExp.push(this.listExpressions[0].value);\n        });\n        this.listEvents = [observer2$];\n    }\n    seeResults() {\n        this.results = true;\n    }\n};\n__decorate([\n    ViewChild('videoElement')\n], VideoComponent.prototype, \"videoElement\", void 0);\nVideoComponent = __decorate([\n    Component({\n        selector: 'app-video',\n        templateUrl: './video.component.html',\n        styleUrls: ['./video.component.css']\n    })\n], VideoComponent);\nexport { VideoComponent };\n"]},"metadata":{},"sourceType":"module"}