{"ast":null,"code":"import _asyncToGenerator from \"/Users/fazozela/Desktop/Tesis Ciencias/PrototipoFinal/EmocionesApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../faceApiService/face-api.service\";\nexport class VideoService {\n  constructor(faceApiService) {\n    var _this = this;\n\n    this.faceApiService = faceApiService;\n    this.dataValues = [];\n\n    this.getLandMark = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(function* (videoElement) {\n        const {\n          globalFace\n        } = _this.faceApiService;\n        const {\n          videoWidth,\n          videoHeight\n        } = videoElement.nativeElement;\n        const displaySize = {\n          width: videoWidth,\n          height: videoHeight\n        }; // console.log(displaySize);\n\n        let detectionsFaces = yield globalFace.detectAllFaces(videoElement.nativeElement).withFaceLandmarks().withFaceExpressions(); //console.log(detectionsFaces);\n\n        const landmark = detectionsFaces[0].landmarks || null;\n        const expressions = detectionsFaces[0].expressions || null;\n        const eyeLeft = landmark.getLeftEye();\n        const eyeRight = landmark.getRightEye();\n        const eyes = {\n          left: [_.head(eyeLeft), _.last(eyeLeft)],\n          right: [_.head(eyeRight), _.last(eyeRight)]\n        };\n        const resizeDetections = globalFace.resizeResults(detectionsFaces, displaySize);\n      });\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n  }\n\n}\n\nVideoService.ɵfac = function VideoService_Factory(t) {\n  return new (t || VideoService)(i0.ɵɵinject(i1.FaceApiService));\n};\n\nVideoService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: VideoService,\n  factory: VideoService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"sources":["/Users/fazozela/Desktop/Tesis Ciencias/PrototipoFinal/EmocionesApp/src/app/services/videoService/video.service.ts"],"names":["i0","i1","VideoService","constructor","faceApiService","dataValues","getLandMark","videoElement","globalFace","videoWidth","videoHeight","nativeElement","displaySize","width","height","detectionsFaces","detectAllFaces","withFaceLandmarks","withFaceExpressions","landmark","landmarks","expressions","eyeLeft","getLeftEye","eyeRight","getRightEye","eyes","left","_","head","last","right","resizeDetections","resizeResults","ɵfac","VideoService_Factory","t","ɵɵinject","FaceApiService","ɵprov","ɵɵdefineInjectable","token","factory","providedIn"],"mappings":";AAAA,OAAO,KAAKA,EAAZ,MAAoB,eAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,oCAApB;AACA,OAAO,MAAMC,YAAN,CAAmB;AACtBC,EAAAA,WAAW,CAACC,cAAD,EAAiB;AAAA;;AACxB,SAAKA,cAAL,GAAsBA,cAAtB;AACA,SAAKC,UAAL,GAAkB,EAAlB;;AACA,SAAKC,WAAL;AAAA,mCAAmB,WAAOC,YAAP,EAAwB;AACvC,cAAM;AAAEC,UAAAA;AAAF,YAAiB,KAAI,CAACJ,cAA5B;AACA,cAAM;AAAEK,UAAAA,UAAF;AAAcC,UAAAA;AAAd,YAA8BH,YAAY,CAACI,aAAjD;AACA,cAAMC,WAAW,GAAG;AAAEC,UAAAA,KAAK,EAAEJ,UAAT;AAAqBK,UAAAA,MAAM,EAAEJ;AAA7B,SAApB,CAHuC,CAIvC;;AACA,YAAIK,eAAe,SAASP,UAAU,CAACQ,cAAX,CAA0BT,YAAY,CAACI,aAAvC,EACvBM,iBADuB,GAEvBC,mBAFuB,EAA5B,CALuC,CAQvC;;AACA,cAAMC,QAAQ,GAAGJ,eAAe,CAAC,CAAD,CAAf,CAAmBK,SAAnB,IAAgC,IAAjD;AACA,cAAMC,WAAW,GAAGN,eAAe,CAAC,CAAD,CAAf,CAAmBM,WAAnB,IAAkC,IAAtD;AACA,cAAMC,OAAO,GAAGH,QAAQ,CAACI,UAAT,EAAhB;AACA,cAAMC,QAAQ,GAAGL,QAAQ,CAACM,WAAT,EAAjB;AACA,cAAMC,IAAI,GAAG;AACTC,UAAAA,IAAI,EAAE,CAACC,CAAC,CAACC,IAAF,CAAOP,OAAP,CAAD,EAAkBM,CAAC,CAACE,IAAF,CAAOR,OAAP,CAAlB,CADG;AAETS,UAAAA,KAAK,EAAE,CAACH,CAAC,CAACC,IAAF,CAAOL,QAAP,CAAD,EAAmBI,CAAC,CAACE,IAAF,CAAON,QAAP,CAAnB;AAFE,SAAb;AAIA,cAAMQ,gBAAgB,GAAGxB,UAAU,CAACyB,aAAX,CAAyBlB,eAAzB,EAA0CH,WAA1C,CAAzB;AACH,OAlBD;;AAAA;AAAA;AAAA;AAAA;AAmBH;;AAvBqB;;AAyB1BV,YAAY,CAACgC,IAAb,GAAoB,SAASC,oBAAT,CAA8BC,CAA9B,EAAiC;AAAE,SAAO,KAAKA,CAAC,IAAIlC,YAAV,EAAwBF,EAAE,CAACqC,QAAH,CAAYpC,EAAE,CAACqC,cAAf,CAAxB,CAAP;AAAiE,CAAxH;;AACApC,YAAY,CAACqC,KAAb,GAAqB,aAAcvC,EAAE,CAACwC,kBAAH,CAAsB;AAAEC,EAAAA,KAAK,EAAEvC,YAAT;AAAuBwC,EAAAA,OAAO,EAAExC,YAAY,CAACgC,IAA7C;AAAmDS,EAAAA,UAAU,EAAE;AAA/D,CAAtB,CAAnC","sourcesContent":["import * as i0 from \"@angular/core\";\nimport * as i1 from \"../faceApiService/face-api.service\";\nexport class VideoService {\n    constructor(faceApiService) {\n        this.faceApiService = faceApiService;\n        this.dataValues = [];\n        this.getLandMark = async (videoElement) => {\n            const { globalFace } = this.faceApiService;\n            const { videoWidth, videoHeight } = videoElement.nativeElement;\n            const displaySize = { width: videoWidth, height: videoHeight };\n            // console.log(displaySize);\n            let detectionsFaces = await globalFace.detectAllFaces(videoElement.nativeElement)\n                .withFaceLandmarks()\n                .withFaceExpressions();\n            //console.log(detectionsFaces);\n            const landmark = detectionsFaces[0].landmarks || null;\n            const expressions = detectionsFaces[0].expressions || null;\n            const eyeLeft = landmark.getLeftEye();\n            const eyeRight = landmark.getRightEye();\n            const eyes = {\n                left: [_.head(eyeLeft), _.last(eyeLeft)],\n                right: [_.head(eyeRight), _.last(eyeRight)]\n            };\n            const resizeDetections = globalFace.resizeResults(detectionsFaces, displaySize);\n        };\n    }\n}\nVideoService.ɵfac = function VideoService_Factory(t) { return new (t || VideoService)(i0.ɵɵinject(i1.FaceApiService)); };\nVideoService.ɵprov = /*@__PURE__*/ i0.ɵɵdefineInjectable({ token: VideoService, factory: VideoService.ɵfac, providedIn: 'root' });\n"]},"metadata":{},"sourceType":"module"}